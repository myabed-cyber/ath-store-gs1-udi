/*! ZXing loader (local shim) - loads @zxing/browser UMD from jsDelivr on-demand */
(() => {
  if (window.ZXingBrowser || window.ZXing) return;
  const URL = 'https://cdn.jsdelivr.net/npm/@zxing/browser@0.1.1/umd/index.min.js';
  window.__ZXING_LOADING__ = window.__ZXING_LOADING__ || new Promise((resolve, reject) => {
    const s = document.createElement('script');
    s.src = URL;
    s.async = true;
    s.crossOrigin = 'anonymous';
    s.onload = () => {
      // Some builds export ZXingBrowser; some export ZXing
      if (!window.ZXingBrowser && window.ZXing) window.ZXingBrowser = window.ZXing;
      resolve(true);
    };
    s.onerror = () => reject(new Error('Failed to load ZXing from CDN'));
    document.head.appendChild(s);
  });
})();
