/*! ZXing loader (local shim) - tries multiple CDNs to provide @zxing/browser UMD */
(() => {
  if (window.ZXingBrowser || window.ZXing) return;

  const URLS = [
    // jsDelivr
    'https://cdn.jsdelivr.net/npm/@zxing/browser@0.1.1/umd/index.min.js',
    // unpkg
    'https://unpkg.com/@zxing/browser@0.1.1/umd/index.min.js',
    // jsDelivr (alternative path)
    'https://fastly.jsdelivr.net/npm/@zxing/browser@0.1.1/umd/index.min.js',
  ];

  const loadScript = (src) => new Promise((resolve, reject) => {
    const s = document.createElement('script');
    s.src = src;
    s.async = true;
    s.onload = () => resolve(true);
    s.onerror = () => reject(new Error('ZXing CDN failed: ' + src));
    document.head.appendChild(s);
  });

  window.__ZXING_LOADING__ = window.__ZXING_LOADING__ || (async () => {
    for (const url of URLS) {
      try {
        await loadScript(url);
        if (window.ZXingBrowser || window.ZXing) return true;
      } catch (e) {
        // try next
      }
    }
    throw new Error('ZXing could not be loaded from CDN (blocked/offline).');
  })();
})();